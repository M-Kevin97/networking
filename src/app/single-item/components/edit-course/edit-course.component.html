<!-- Modal header -->
<div class="modal-header">

  <button class="btn btn-outline-info navbar-toggler border border-info mb-3 mr-4" 
          type="button"
          (click)="isSideBarCollapsed = !isSideBarCollapsed">

    <span class="iconify" 
          data-icon="foundation:list" 
          data-inline="false">
    </span>
  </button>

  <h4 class="modal-title">Modification</h4>

  <button type="button" 
          class="btn btn-outline-danger border border-danger" 
          aria-label="Close" 
          (click)="activeModal.close(true)">
    <small>Quitter</small>
  </button>
</div>
<div class="modal-body">

  <div *ngIf="hasBeenUpdated" 
      class="alert alert-success text-center sticky-top">
    <span>Vos modifications ont bien été enregistré !</span>
  </div>

  <div class="row container"
       [ngClass]="{ 'justify-content-center': isSideBarCollapsed }">

    <!-- Sidebar -->
    <nav [ngClass]="{ 
          'col-lg-auto': isSideBarCollapsed,
          'col-md-auto': isSideBarCollapsed,
          'col-sm-auto': isSideBarCollapsed,
          'col-lg-3': !isSideBarCollapsed,
          'col-md-4': !isSideBarCollapsed
                }">

      <div id="sidebar" 
           [ngClass]="{ 'collapse': isSideBarCollapsed }">

        <div class="nav flex-column nav-pills list-s-item-link mb-3" 
             id="v-pills-tab" 
             role="tablist" 
             aria-orientation="vertical">

          <a  class="nav-link s-item-link active" 
              [ngClass]="{  'active': activePane === getPane().GENERAL }" 
              (click)="activePane = getPane().GENERAL"
              id="v-pills-general-tab" 
              data-toggle="pill" 
              href="#v-pills-general" 
              role="tab" 
              aria-controls="v-pills-general" 
              aria-selected="true">
            Général
            <span *ngIf="notifGeneral>0"
                  class="pull-right">
              <span class="badge badge-danger">{{ notifGeneral }}</span>
              <span class="sr-only">missing</span>
            </span>
          </a>

          <a  class="nav-link s-item-link"
              [ngClass]="{  'active': activePane === getPane().MEDIA }" 
              (click)="activePane = getPane().MEDIA"
              id="v-pills-media-tab" 
              data-toggle="pill" 
              href="#v-pills-media" 
              role="tab" 
              aria-controls="v-pills-media" 
              aria-selected="false">
            Media
            <span *ngIf="notifMedia"
                  class="pull-right">
              <span class="badge badge-danger">1</span>
              <span class="sr-only">missing</span>
            </span>
          </a>

          <a class="nav-link s-item-link" 
              [ngClass]="{  'active': activePane === getPane().TAGS }" 
              (click)="activePane = getPane().TAGS"
              id="v-pills-tags-tab" 
              data-toggle="pill" 
              href="#v-pills-tags" 
              role="tab" 
              aria-controls="v-pills-tags" 
              aria-selected="false">
            Tags
            <span *ngIf="!item.tags || !item.tags.length"
                  class="pull-right">
              <span class="badge badge-danger">1</span>
              <span class="sr-only">missing</span>
            </span>
          </a>

          <a  *ngIf="isCourse()"
              class="nav-link s-item-link" 
              [ngClass]="{  'active': activePane === getPane().PREREQUISITES }" 
              (click)="activePane = getPane().PREREQUISITES"
              id="v-pills-prerequisites-tab" 
              data-toggle="pill" 
              href="#v-pills-prerequisites" 
              role="tab" 
              aria-controls="v-pills-prerequisites" 
              aria-selected="false">
            Prérequis
            <span *ngIf="getNotifPrerequisites()"
                  class="pull-right">
                <span class="badge badge-danger">1</span>
                <span class="sr-only">missing</span>
            </span>
          </a>


          <a  *ngIf="isCourse()"
              class="nav-link s-item-link" 
              [ngClass]="{  'active': activePane === getPane().SKILLS }" 
              (click)="activePane = getPane().SKILLS"
              id="v-pills-skills-tab" 
              data-toggle="pill" 
              href="#v-pills-skills" 
              role="tab" 
              aria-controls="v-pills-skills" 
              aria-selected="false">
            Compétences
            <span *ngIf="getNotifSkills()"
                  class="pull-right">
                <span class="badge badge-danger">1</span>
                <span class="sr-only">missing</span>
            </span>
          </a>

          <a  *ngIf="isCourse()"
              class="nav-link s-item-link" 
              [ngClass]="{  'active': activePane === getPane().MODULES }" 
              (click)="activePane = getPane().MODULES; isSideBarCollapsed = true;"
              id="v-pills-modules-tab" 
              data-toggle="pill" 
              href="#v-pills-modules" 
              role="tab" 
              aria-controls="v-pills-modules" 
              aria-selected="false">
            Modules
            <span *ngIf="getNotifModules()"
                  class="pull-right">
                <span class="badge badge-danger">1</span>
                <span class="sr-only">missing</span>
            </span>
          </a>

        </div>
      </div>

    </nav>
    <div class="pull-right col-lg-9 col-md-8"
         [ngClass]="{ 
            'col-lg-12': isSideBarCollapsed,
            'col-md-12': isSideBarCollapsed,
            'col-sm-12': isSideBarCollapsed
                }">

      <div class="tab-content" id="v-pills-tabContent">

        <div  class="tab-pane fade" 
              [ngClass]="{  
                'show': activePane === getPane().GENERAL,
                'active': activePane === getPane().GENERAL
              }"
              id="v-pills-general" 
              role="tabpanel" 
              aria-labelledby="v-pills-general-tab">

          <app-edit-general [item]="newItem">
          </app-edit-general>
        </div>

        <div  class="tab-pane fade"
              [ngClass]="{  
                'show': activePane === getPane().MEDIA,
                'active': activePane === getPane().MEDIA
              }"
              id="v-pills-media" 
              role="tabpanel" 
              aria-labelledby="v-pills-media-tab">
          <app-edit-media [item]="newItem">
          </app-edit-media>
        </div>

        <div  class="tab-pane fade" 
              [ngClass]="{  
                'show': activePane === getPane().TAGS,
                'active': activePane === getPane().TAGS
              }"
              id="v-pills-tags" 
              role="tabpanel" 
              aria-labelledby="v-pills-tags-tab">
          <app-edit-tags [item]="newItem">
          </app-edit-tags>
        </div>

        <div *ngIf="isCourse()"
             class="tab-pane fade" 
             [ngClass]="{  
              'show': activePane === getPane().SKILLS,
              'active': activePane === getPane().SKILLS
             }"
             id="v-pills-skills" 
             role="tabpanel" 
             aria-labelledby="v-pills-skills-tab">

          <app-edit-skills-item [course]="getCourse()">
          </app-edit-skills-item>
        </div>

        <div *ngIf="isCourse()"
             class="tab-pane fade" 
             [ngClass]="{  
              'show': activePane === getPane().PREREQUISITES,
              'active': activePane === getPane().PREREQUISITES
             }"
             id="v-pills-prerequisites" 
             role="tabpanel" 
             aria-labelledby="v-pills-prerequisites-tab">

          <app-edit-prerequisites [course]="getCourse()">
          </app-edit-prerequisites>
        </div>

        <div  *ngIf="isCourse()"
              class="tab-pane fade" 
              [ngClass]="{  
                'show': activePane === getPane().MODULES,
                'active': activePane === getPane().MODULES
               }"
              id="v-pills-modules" 
              role="tabpanel" 
              aria-labelledby="v-pills-modules-tab">

          <app-edit-course-content [course]="getCourse()"
                                   [courseId]="newItem.id">
          </app-edit-course-content>
        </div>

      </div>
      
    </div>
  </div>
</div>
<div class="modal-footer">
  <button type="button" 
          class="btn btn-outline-secondary" 
          (click)="activeModal.dismiss(false)">
    Annuler
  </button>

  <button type="button" 
          class="btn btn-success"
          (click)="updateItem(activePane)">
    Enregistrer
  </button>
</div>
