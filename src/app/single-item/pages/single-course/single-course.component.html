<!------------------------------------ Page Single Course ------------------------------------>
<div *ngIf="hasItem && isAuthor && hasBeenUpdated" 
     class="alert alert-success text-center sticky-top">
  <span>Vos modifications ont bien été enregistré !</span>
</div>

<!-- Si la formation n'existe pas  -->
<div *ngIf ="!hasItem">
  La formation n'existe pas
</div>

<!-- Si la formation existe  -->
<div class="container w-100" *ngIf ="hasItem">

  <div class="row item-path">
    <a *ngIf="backLink && isSearchBackLink; else elseLink" 
       [href]="backLink">
      <span class="iconify" 
            data-icon="eva:arrow-ios-back-fill" 
            data-inline="false"
            style="font-size: 1.3em;">
      </span>
      <span>Retour aux résultats</span>
    </a>
    <ng-template #elseLink>
      <a [href]="backLink">
        <span class="iconify" 
              data-icon="eva:arrow-ios-back-fill" 
              data-inline="false"
              style="font-size: 1.3em;">
        </span>
        <span>Retour</span>
      </a>
    </ng-template>
  </div>

  <div class="row item-content w-100">

    <!-- Start page item Head -->
    <div class="col-lg-9 col-md-8">
      <div class="heading px-2">
        <div class="title-section mt-3">
          <h2 class="item-title mb-2">
            {{ course.title }}
            <app-button-edit class="ml-5" 
                             (click)="openEditCourseModal(getEditPane().GENERAL)"
                             *ngIf="isAuthor">
            </app-button-edit>
          </h2>
          <h3 class="item-subtitle">
            {{ course.catchPhrase }}
          </h3>
        </div>

        <div class="item-features">
          <div class="row">
            <div class="col-6">
              <span class="feature-text">
                <i id="glob" class="fa fa-globe" aria-hidden="true"></i>
                Français
              </span>
            </div>
            <div class="col-6">
              <span class="feature-text">
                <i class="fa fa-graduation-cap" aria-hidden="true"></i>
                <b>Expérience requise :</b> 
                Aucune 
              </span>
            </div>
          </div>
          <hr> <!-- separation line -->
          <div class="row">
            <div class="col-6">
              <a class="rating-link" [routerLink]='"."' 
                                      fragment='ratings'>
                <app-rating [style]="1" 
                            [nbRatings]="course.nbRatings" 
                            [globalNote]="course.globalNote"
                            [size]="1.4">
                </app-rating>
              </a>
            </div>
            <div class="col-6">
              <span class="feature-text">
              <i id="info" class="fa fa-info-circle" aria-hidden="true"></i> 
                <b>Date de création : </b>
                {{ course.creationDate }}
              </span>
            </div>
          </div>
        </div>
    
        <div *ngIf="course.tags" class="course-tags mt-3 mx-3">
          <span *ngFor="let tag of course.tags; let i = index" 
                class="course-tag py-2 px-3 mr-2"
                (click)="onSearchTag(tag)">

            <span class="iconify" 
                  data-icon="heroicons-solid:hashtag" 
                  data-inline="false" 
                  style="color: #2E7B9C; font-size: 1.1em;">
            </span>

            <span class="item-p item-click">{{ tag.name }}</span>
          </span> 
        </div>
      </div> <!-- End page item Head -->


      <!-- Start Author section -->
      <div *ngIf="!isAuthor" 
           class="item-block author-block">
        <app-card-author [author]="course.getMainiAuthor()">
        </app-card-author>
      </div> <!-- End Author section -->

      <!-- Start completion section -->
      <div class="completion-block">
        <app-completion-board [item]="course">
        </app-completion-board>
      </div>  <!-- End completion section -->

      <!-- Start Description section -->
      <div class="item-block description-block">
        <h5 class="title-cat">
          Description
          <app-button-edit class="ml-5" 
                           (click)="openEditCourseModal(getEditPane().GENERAL)"
                           *ngIf="isAuthor">
          </app-button-edit>
        </h5>
        <hr> <!-- separation line -->
        <app-description-section [description]="course.description">
        </app-description-section>

        <div class="text-center">
          <button *ngIf="isAuthor && (!course.description || !course.description.length)"
                    class="btn btn-sm btn-success"
                    (click)="openEditCourseModal(getEditPane().GENERAL)">
            Ajouter une description
          </button>
        </div>
      </div> <!-- End Description section -->

      <!-- Start Prerequisites item section -->
      <div class="item-block prerequisites-block">
        <h5 class="title-cat">
          Prérequis
          <app-button-edit class="ml-5" 
                            (click)="openEditCourseModal(getEditPane().PREREQUISITES)"
                            *ngIf="isAuthor">
          </app-button-edit>
        </h5>

        <hr> <!-- separation line -->

        <div *ngIf="course.prerequisites">

          <div class="row">
            <div class="col-6">
              <ul class="check-list">
                <li *ngFor="let prerequisite of getListBeginning(course.prerequisites)">
                  <i id="check" 
                     class="fa fa-check" 
                     aria-hidden="true">
                  </i>
                  <span class="prerequisite-text">
                    {{ prerequisite }}
                  </span> 
                </li>
              </ul>
            </div>
            <div class="col-6">
              <ul class="check-list">
                <li *ngFor="let prerequisite of getListEnding(course.prerequisites)">
                  <i id="check" 
                     class="fa fa-check" 
                     aria-hidden="true">
                  </i>
                  <span class="prerequisite-text">
                    {{ prerequisite }}
                  </span> 
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="text-center">
          <button *ngIf="isAuthor && (!course.prerequisites || !course.prerequisites.length)" 
                    class="btn btn-sm btn-success"
                    (click)="openEditCourseModal(getEditPane().PREREQUISITES)">
              Ajouter des prérequis
          </button>
        </div>
        
      </div> <!-- End Prerequisites item section -->

      <!-- Start skills-to-acquire item section -->
      <div class="item-block skills-block">
        <h5 class="title-cat">
          Compétences à acquérir
          <app-button-edit class="ml-5" 
                           (click)="openEditCourseModal(getEditPane().SKILLS)"
                           *ngIf="isAuthor">
          </app-button-edit>
        </h5>

        <hr> <!-- separation line -->

        <div *ngIf="course.skillsToAcquire">

          <div class="row">
            <div class="col-6">
              <ul class="check-list">
                <li *ngFor="let skill of getListBeginning(course.skillsToAcquire)">
                  <i id="check" 
                     class="fa fa-check" 
                     aria-hidden="true">
                  </i>
                  <span class="skill-text">
                    {{ skill }}
                  </span> 
                </li>
              </ul>
            </div>
            <div class="col-6">
              <ul class="check-list">
                <li *ngFor="let skill of getListEnding(course.skillsToAcquire)">
                  <i id="check" class="fa fa-check" aria-hidden="true"></i>
                  <span class="skill-text">
                    {{ skill }}
                  </span> 
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="text-center">
          <button *ngIf="isAuthor && (!course.skillsToAcquire || !course.skillsToAcquire.length)" 
                    class="btn btn-sm btn-success"
                    (click)="openEditCourseModal(getEditPane().SKILLS)">
              Ajouter des compétences à acquérir
          </button>
        </div>
        
      </div> <!-- End skills-to-acquire item section -->

      <!-- Start course content section -->
      <div class="item-block description-block">
        <h5 class="title-cat">
          Contenu de la formation
          <app-button-edit class="ml-5" 
                           (click)="openEditCourseModal(getEditPane().MODULES)"
                           *ngIf="isAuthor">
          </app-button-edit>
        </h5>

        <hr> <!-- separation line -->

        <div class="text-center">
          <button *ngIf="isAuthor && (!course.modules || !course.modules.length)" 
                  class="btn btn-sm btn-success"
                  (click)="openEditCourseModal(getEditPane().MODULES)">
            Ajouter le programme de votre formation
          </button>
        </div>
   

        <app-course-content [courseContent]="course.modules">
        </app-course-content>

      </div> <!-- End course content  section -->

      <!-- Start section more author's items  -->
      <div *ngIf="course.getMainiAuthor() && course.getMainiAuthor().iCourses && course.getMainiAuthor().iCourses.length" 
           class="item-block skills-block">
        <h5 class="title-cat"> Plus de 
          <a (click)="goToUserPage()">
            {{ item.getMainiAuthorName() }}
          </a>
        </h5>
        <hr> <!-- separation line -->
        <app-items-carousel [iItems]="course.getMainiAuthor().iCourses"
                            [iAuthor]="course.getMainiAuthor()">
        </app-items-carousel>
      </div>   <!-- End section more author's courses  -->

      <!-- Start section Ratings -->
      <div id="ratings" class="item-block ratings-block">
        <h5 class="title-cat">
          Avis
          <button *ngIf="!isAuthor && !hasUserRateAlready()"
                  class="btn btn-rating ml-5" 
                  (click)="openRatingCourseModal()">
            Évaluer la formation
          </button>
        </h5>
        <hr> <!-- separation line -->
        <app-global-rating [ratings]="course.ratings"
                           [globalNote]="course.globalNote">
        </app-global-rating>

        <hr> <!-- separation line -->
        
        <app-rating-list [ratings]="course.ratings"
                         (newRatings)="refreshRatings($event)">
        </app-rating-list>
        
      </div> <!-- End section Ratings -->
    </div>

    <!-- Start Price Card -->
    <div class="col-lg-3 col-md-4">
      <div class="sticky">
        <app-card-image-price-item [item]="item">
        </app-card-image-price-item>
      </div> 
    </div>  <!-- End Price Card -->

  </div>
</div>






            